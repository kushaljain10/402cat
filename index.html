<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>402 Cat</title>
  <meta name="description" content="402 Cat. Payment Required." />
  <link rel="icon" type="image/png" href="./favicon.png" />
  <style>
    :root { color-scheme: light dark; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(1200px 600px at 50% -200px, #1a1a1a 0%, #0b0b0b 55%, #000 100%);
      font-family: Georgia, "Times New Roman", Times, serif;
      color: #fff;
      padding: 12px;
    }
    .poster {
      width: min(900px, 94vw);
      background: #000;
      text-align: center;
      border: 10px solid #000;
      box-shadow: 0 14px 50px rgba(0, 0, 0, 0.7);
      border-radius: 12px;
      overflow: hidden;
      z-index: 0;
    }
    .poster .image-frame { margin: 18px; border: 8px solid #fff; background: #000; border-radius: 6px; }
    .poster img { display: block; width: 100%; height: auto; border-radius: 2px; }
    .caption { padding: 18px 0 26px; }
    .caption .code { font-size: clamp(52px, 9vw, 120px); line-height: 1; font-weight: 700; margin: 0; letter-spacing: 0.5px; }
    .caption .text { font-size: clamp(16px, 3vw, 28px); margin: 8px 0 0; opacity: 0.95; }

    .contract-box {
       width: min(900px, 94vw);
       display: flex;
       align-items: center;
       gap: 12px;
       margin: 10px 0 24px;
       padding: 14px 16px;
       background: #121212;
       border: 1px solid #2d2d2d;
       border-radius: 10px;
       box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35) inset, 0 6px 24px rgba(0, 0, 0, 0.35);
       z-index: 0;
     }
    .contract-label { font-weight: 700; }
    .contract-value { flex: 1; word-break: break-word; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .copy-btn { appearance: none; background: #fff; color: #000; border: none; border-radius: 8px; padding: 10px 14px; font-weight: 700; cursor: pointer; box-shadow: 0 2px 6px rgba(255,255,255,0.12); }
    .copy-btn:hover { background: #e6e6e6; }
    .copy-status { font-size: 12px; color: #9ef59e; opacity: 0; transition: opacity .2s ease; }
    .copy-status.show { opacity: 1; }

    /* Dollar rain overlay */
    .money-rain { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 9999; }
    .bill { position: absolute; top: -12vh; left: var(--left); width: clamp(44px, 8vw, 120px); height: auto; border-radius: 4px; border: none; background: transparent;
      box-shadow: 0 6px 16px rgba(0,0,0,.35);
      opacity: 0.95;
      animation: fallTop var(--duration, 7s) linear var(--delay, 0s) forwards,
                 swayX var(--swayDuration, 3s) ease-in-out var(--swayDelay, 0s) infinite,
                 spin var(--spinDuration, 3.2s) ease-in-out var(--spinDelay, 0s) infinite;
    }
    .bill img { display: block; width: 100%; height: auto; }
    /* bill images are injected by JS; no pseudo-content needed */

    @keyframes fallTop { from { top: -12vh; } to { top: 110vh; } }
    @keyframes swayX { 0% { margin-left: -10px; } 50% { margin-left: 10px; } 100% { margin-left: -10px; } }
    @keyframes spin { 0% { transform: rotate(var(--rot)); } 50% { transform: rotate(calc(var(--rot) + 10deg)); } 100% { transform: rotate(var(--rot)); } }

    @media (max-width: 600px) {
      body { padding: 16px; }
      .poster { border-radius: 10px; }
      .contract-box { flex-direction: column; align-items: stretch; gap: 10px; }
      .copy-btn { width: 100%; padding: 12px; }
      .contract-value { font-size: 14px; }
    }

    /* Respect reduced-motion users */
    @media (prefers-reduced-motion: reduce) {
      .bill { animation: none; }
    }
  </style>
</head>
<body>
  <!-- money-rain moved below to ensure stacking/paint order -->

  <main class="poster" role="main" aria-labelledby="title">
    <div class="image-frame">
      <img src="./402cat.jpg" alt="402 cat with money" />
    </div>
    <div class="caption">
      <h1 id="title" class="code">402</h1>
      <p class="text">Payment Required</p>
    </div>
  </main>

  <section class="contract-box" aria-live="polite">
    <span class="contract-label">Contract Address:</span>
    <span id="contract-value" class="contract-value" data-full="ycDxV6PEo3pXWo46Ajuk3NwUHjcU6d6DBKLn481pump">ycDxV6PEo3pXWo46Ajuk3NwUHjcU6d6DBKLn481pump</span>
    <button id="copy-btn" class="copy-btn" type="button" aria-label="Copy contract address">Copy</button>
    <span id="copy-status" class="copy-status"></span>
  </section>
  <div class="money-rain" aria-hidden="true" id="money-rain"></div>

  <script>
    (function() {
      // Contract truncation + copy
      const valueEl = document.getElementById('contract-value');
      const copyBtn = document.getElementById('copy-btn');
      const statusEl = document.getElementById('copy-status');
      const fullText = valueEl.dataset.full || valueEl.textContent.trim();
      valueEl.dataset.full = fullText;

      function truncateMiddle(str, front = 12, back = 8) {
        if (str.length <= front + back + 1) return str;
        return str.slice(0, front) + 'â€¦' + str.slice(-back);
      }

      const mq = window.matchMedia('(max-width: 600px)');
      function render() { valueEl.textContent = mq.matches ? truncateMiddle(fullText) : fullText; }
      render();
      if (mq.addEventListener) mq.addEventListener('change', render); else mq.addListener(render);

      function showStatus(msg) {
        statusEl.textContent = msg;
        statusEl.classList.add('show');
        setTimeout(() => { statusEl.classList.remove('show'); statusEl.textContent = ''; }, 1400);
      }

      copyBtn.addEventListener('click', async () => {
        try { await navigator.clipboard.writeText(fullText); showStatus('Copied!'); }
        catch (err) {
          const ta = document.createElement('textarea'); ta.value = fullText; document.body.appendChild(ta); ta.select();
          try { document.execCommand('copy'); showStatus('Copied!'); } catch(e) { showStatus('Unable to copy'); } finally { document.body.removeChild(ta); }
        }
      });

      // Dollar rain
      const container = document.getElementById('money-rain');
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced) {
        const spawn = () => {
           const bill = document.createElement('span');
           bill.className = 'bill';
           const img = document.createElement('img');
           const files = ['1.png','2.png','5.png','10.png','20.png','50.png','100.png'];
           img.src = './' + files[Math.floor(Math.random() * files.length)];
           img.alt = 'Dollar bill';

           const left = Math.random() * 100; // vw
           bill.style.setProperty('--left', left + 'vw');
           bill.style.setProperty('--rot', (Math.random() * 30 - 15) + 'deg');
           bill.style.setProperty('--delay', (Math.random() * 3) + 's');
           bill.style.setProperty('--duration', (6 + Math.random() * 7) + 's');
           bill.style.setProperty('--swayDuration', (2 + Math.random() * 2.5) + 's');
           bill.style.setProperty('--swayDelay', (Math.random() * 2) + 's');
           bill.style.setProperty('--spinDuration', (2.6 + Math.random() * 2) + 's');
           bill.style.setProperty('--spinDelay', (Math.random() * 2) + 's');

           bill.appendChild(img);
           container.appendChild(bill);
           bill.addEventListener('animationend', () => { bill.remove(); });
         };
        // Initial burst (reduced by ~30%)
        for (let i = 0; i < 21; i++) spawn();
        // Continuous rain (reduced by ~30%)
        setInterval(() => { for (let i = 0; i < 3; i++) spawn(); }, 430);
      }
    })();
  </script>
</body>
</html>
